# 技術スタック

## アーキテクチャ

FastMCPフレームワークを使用したMCPサーバー。ツールベースのAPI公開方式を採用。各GROWI API機能は登録されたMCPツールにマッピングされる。マルチアプリ対応はGROWI SDKを通じた名前付きAxiosインスタンスで実現。

## コア技術

- **言語**: TypeScript（ES Modules）
- **フレームワーク**: FastMCP（MCPサーバーフレームワーク）
- **ランタイム**: Node.js 18+
- **パッケージマネージャー**: pnpm

## 主要ライブラリ

- **fastmcp**: MCPサーバー実装フレームワーク
- **@growi/sdk-typescript**: 公式GROWI APIクライアント（v1およびv3エンドポイント）
- **zod**: ツールパラメータのランタイムスキーマバリデーション
- **dotenv-flow**: 環境設定管理

## 開発標準

### 型安全性
- Node 22ベース設定によるTypeScript
- ES Moduleシステム（`"type": "module"`）
- `satisfies z.ZodType<T>`パターンによるZodスキーマでのパラメータバリデーション

### コード品質
- **Biome**: リンティングとフォーマッティング
- シングルクォート、トレイリングカンマ、2スペースインデント
- 160文字の行幅
- インポート整理を有効化

### テスト
- **Vitest**: v8カバレッジ対応テストランナー
- テストファイルはソースと同じ場所に配置（`.test.ts`サフィックス）

## 開発環境

### 必要ツール
- Node.js 18+
- pnpm（v10.11.0指定）
- テスト用GROWIインスタンス

### 主要コマンド
```bash
# MCP CLIで開発: pnpm dev:cli
# Inspectorで開発: pnpm dev:inspect
# ビルド: pnpm build
# リント: pnpm lint
# テスト: pnpm test
```

## 主要技術決定

- **生のMCP SDKよりFastMCP**: ツール登録とサーバーライフサイクルの簡素化
- **nccによるバンドル**: 単一ファイル配布（`dist/index.js`）
- **Zodによるバリデーション**: 明確なエラーメッセージを伴うランタイム型安全性
- **番号付き環境変数によるマルチアプリ**: 複雑な設定ファイルなしの柔軟な設定
- **SDK Axiosインスタンスマネージャー**: GROWIアプリごとの集中HTTP クライアント管理

---
_すべての依存関係ではなく、標準とパターンを文書化する_
